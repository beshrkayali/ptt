jQuery.ptt=function(options){var slides;timetable=options.timetable||{};video_container=options.video_container;video_width=options.video_width||"425";video_height=options.video_height||"356";ytvideo_url=options.ytvideo_url+"?&enablejsapi=1&playerapiid=ytplayer&version=3";if(swfobject){var onSpeakerDeckPlayerReady=function(p){slides=p;};var params={allowScriptAccess:"always"};var atts={id:"ytplayer"};swfobject.embedSWF(ytvideo_url,video_container,video_width,video_height,"8",null,null,params,atts);onPlayerStateChange=function(newState){var intervalId=null;if(newState==1){if(slides){intervalId=setInterval(playHeadMove,100);}}else{if(intervalID){clearInterval(intervalId);}}};onYouTubePlayerReady=function(playerId){ytplayer=document.getElementById("ytplayer");ytplayer.addEventListener("onStateChange","onPlayerStateChange");};String.prototype.pad=function(l,s){return(l-=this.length)>0?(s=new Array(Math.ceil(l/s.length)+1).join(s)).substr(0,s.length)+this+s.substr(0,l-s.length):this;};playHeadMove=function(){ytplayer=document.getElementById("ytplayer");timeNow=ytplayer.getCurrentTime();if(timeNow<=216000){timeNow=Math.floor(timeNow/60).toFixed().pad(2,"0")+":"+(timeNow%60).toFixed().pad(2,"0");}for(i in timetable){if(timeNow==i){slides.goToSlide(timetable[i]);}}};}};